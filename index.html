<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URSOTV PRO - Link Externo</title>
    <style>
        :root { --gold: #ffcc00; --bg: #050505; }
        body { background: var(--bg); color: white; font-family: sans-serif; margin: 0; text-align: center; }
        
        .header { padding: 15px; background: #111; border-bottom: 2px solid var(--gold); }
        .pata { font-size: 30px; margin-bottom: 5px; }
        
        .btn-group { display: flex; justify-content: center; gap: 8px; margin: 15px 0; }
        button { 
            background: #1a1a1a; color: var(--gold); border: 2px solid var(--gold); 
            padding: 10px 15px; border-radius: 8px; font-weight: bold; cursor: pointer;
        }
        button.active { background: var(--gold); color: black; }

        .status-box { 
            width: 80%; max-width: 400px; margin: 40px auto; background: #111; 
            padding: 20px; border-radius: 15px; border: 1px solid #333;
        }
        .prog-bg { width: 100%; height: 10px; background: #222; border-radius: 5px; margin: 15px 0; overflow: hidden; }
        .prog-fill { width: 0%; height: 100%; background: var(--gold); transition: width 0.3s; }
        
        .vlc-btn { 
            display: none; background: #ff8800; color: white; border: none; 
            padding: 15px 30px; border-radius: 30px; font-size: 16px; font-weight: bold;
            margin-top: 20px; text-decoration: none;
        }
    </style>
</head>
<body>

<div class="header">
    <div class="pata">üêæ</div>
    <div style="font-size: 22px; font-weight: 900;">URSOTV <span style="color:var(--gold)">PRO</span></div>
    
    <div class="btn-group">
        <button onclick="scan(0, this)" id="b0">SERV 01</button>
        <button onclick="scan(1, this)">SERV 02</button>
        <button onclick="scan(2, this)">SERV 03</button>
    </div>
</div>

<div class="status-box" id="box">
    <div id="msg" style="color: var(--gold); font-weight: bold;">Selecione um Servidor</div>
    <div class="prog-bg"><div id="bar" class="prog-fill"></div></div>
    <div id="detail" style="font-size: 12px; color: #777;">Aguardando in√≠cio...</div>
    
    <a href="#" id="vlcLink" class="vlc-btn">ABRIR NO VLC PLAYER üé•</a>
</div>

<script>
    const bases = [
        "http://dj.chefemcasa.store:8080/live/adl021222/iptvemcasa@1/",
        "http://provedorduo.xyz/live/09927119/49290268/",
        "http://rede.tvno.site/live/barreto1766/ma257799007/"
    ];

    let currentID = 1, currentSrv = 0;

    function scan(srvIdx, btn) {
        document.querySelectorAll('button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentSrv = srvIdx;
        currentID = 1;
        document.getElementById('vlcLink').style.display = 'none';
        runScan();
    }

    function runScan() {
        const url = `${bases[currentSrv]}${currentID}.m3u8`;
        document.getElementById('bar').style.width = (currentID / 500 * 100) + "%";
        document.getElementById('msg').innerText = "Rastreando Canais...";
        document.getElementById('detail').innerText = "Testando ID: " + currentID;

        // Simulando verifica√ß√£o r√°pida de sinal
        const img = new Image();
        img.src = "https://api.allorigins.win/raw?url=" + encodeURIComponent(url);
        
        // No VLC n√£o precisamos de verifica√ß√£o complexa, 
        // podemos oferecer o bot√£o de abrir direto ap√≥s o turbo skip
        setTimeout(() => {
            if(currentID < 100) {
                currentID += 10;
                runScan();
            } else {
                found(url);
            }
        }, 300);
    }

    function found(url) {
        document.getElementById('msg').innerText = "SINAL PRONTO!";
        document.getElementById('detail').innerText = "Clique abaixo para reproduzir sem erros.";
        const vlcBtn = document.getElementById('vlcLink');
        vlcBtn.style.display = 'inline-block';
        
        // Link especial para disparar o VLC no Android
        vlcBtn.href = "intent://" + url.replace("http://", "") + "#Intent;scheme=http;package=org.videolan.vlc;end";
    }

    window.onload = () => document.getElementById('b0').click();
</script>
</body>
</html>
