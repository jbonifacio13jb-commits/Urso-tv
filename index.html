<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>URSOTV PREMIUM</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        :root { --primary: #00d4ff; --bg: #000; }
        body { margin: 0; background: var(--bg); color: white; font-family: sans-serif; overflow: hidden; }

        /* PAINEL PRINCIPAL - ABRE IMEDIATAMENTE */
        #dashboard { 
            display: flex; height: 100vh; flex-direction: column; padding: 20px; 
            box-sizing: border-box; background: radial-gradient(circle, #001a2e 0%, #000 100%); 
            align-items: center; justify-content: center;
        }
        .logo-neon { width: 150px; margin-bottom: 30px; filter: drop-shadow(0 0 15px var(--primary)); }
        
        .grid-menu { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; width: 100%; max-width: 500px; }
        .menu-item { 
            background: rgba(255,255,255,0.05); border: 2px solid var(--primary); 
            border-radius: 15px; padding: 25px 10px; text-align: center; cursor: pointer;
            transition: 0.3s;
        }
        .menu-item:active { background: var(--primary); color: #000; }
        .menu-item i { font-size: 30px; display: block; margin-bottom: 5px; }

        /* LISTAGEM */
        #view { display: none; position: fixed; inset: 0; background: #000; flex-direction: column; padding: 15px; z-index: 100; }
        .search { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid var(--primary); background: #111; color: #fff; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 10px; overflow-y: auto; }
        .card { background: #111; border-radius: 8px; border: 1px solid #222; overflow: hidden; text-align: center; }
        .card img { width: 100%; aspect-ratio: 2/3; object-fit: cover; }
        
        /* PLAYER */
        #player { position: fixed; inset: 0; background: #000; display: none; z-index: 500; }
        video { width: 100%; height: 100%; }
        .btn { padding: 10px 20px; background: var(--primary); color: #000; border: none; border-radius: 5px; font-weight: bold; margin-bottom: 10px; cursor: pointer; }
    </style>
</head>
<body>

    <div id="dashboard">
        <img src="logo.png" class="logo-neon" onerror="this.src='https://via.placeholder.com/150/00d4ff/000?text=URSO+TV'">
        <h2 style="color:var(--primary); margin-bottom: 30px;">URSOTV+ PREMIUM</h2>
        
        <div class="grid-menu">
            <div class="menu-item" onclick="abrir('CANAIS')"><i>üì∫</i><span>CANAIS</span></div>
            <div class="menu-item" onclick="abrir('FILMES')"><i>üé¨</i><span>FILMES</span></div>
            <div class="menu-item" onclick="abrir('SERIES')"><i>üçø</i><span>S√âRIES</span></div>
        </div>
        
        <p id="status" style="margin-top: 30px; font-size: 12px; color: var(--primary);">Sincronizando canais...</p>
    </div>

    <div id="view">
        <button class="btn" onclick="voltar()">‚ùÆ VOLTAR AO MENU</button>
        <input type="text" class="search" placeholder="Procurar conte√∫do..." oninput="buscar(this.value)">
        <div id="main-grid" class="grid"></div>
    </div>

    <div id="player">
        <button class="btn" style="position:absolute; top:15px; left:15px; z-index:600;" onclick="fechar()">‚ùÆ VOLTAR</button>
        <video id="vid" controls></video>
    </div>

<script>
    let dados = { CANAIS: [], FILMES: [], SERIES: [] };
    let catAtual = '';
    const linkM3U = "https://xcloudcine.xyz/get.php?username=619963334&password=327363322&type=m3u_plus";

    // CARREGAMENTO EM SEGUNDO PLANO (N√ÉO TRAVA A TELA)
    async function carregarLista() {
        const status = document.getElementById('status');
        try {
            const r = await fetch("https://api.allorigins.win/raw?url=" + encodeURIComponent(linkM3U));
            const t = await r.text();
            
            if (
